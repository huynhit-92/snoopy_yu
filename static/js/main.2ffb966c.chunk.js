(this.webpackJsonpsnoopy_yu=this.webpackJsonpsnoopy_yu||[]).push([[0],{171:function(t,e){},193:function(t,e,n){"use strict";n.r(e);var a=n(1),c=n(0),s=n.n(c),r=n(75),i=n.n(r),o=(n(86),n(35)),u=n(2),l=n(12),h=n(13),d=n(24),p=n(27),j=n(26),b=n(34),f=n.n(b),v="https://video.google.com/timedtext?";function m(t){return f.a.get("https://youtube.googleapis.com/youtube/v3/"+t+"key=".concat("AIzaSyAlfy4z3ic61tExYEvrZNUJiaPMoq1DkFs"))}var y=n(25),x=n.n(y),g=n(11),O=n.n(g),C=function(t){Object(p.a)(n,t);var e=Object(j.a)(n);function n(t){var a;return Object(l.a)(this,n),(a=e.call(this,t)).search=O.a.throttle((function(){var t=this;(this.state.q?m("search?part=snippet&q=".concat(this.state.q,"&type=video&videoCaption=any&")):m("videos?chart=mostPopular&")).then((function(e){t.setState({videos:e.data.items})}))}),1e3),a.state={q:"",videos:[]},a.handleChange=a.handleChange.bind(Object(d.a)(a)),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.search()}},{key:"handleChange",value:function(t){this.setState({q:t.target.value}),this.search()}},{key:"render",value:function(){var t=this;return Object(a.jsxs)("div",{className:"container py-2 justify-content-center",children:[Object(a.jsx)("div",{className:"row justify-content-center",children:Object(a.jsxs)("div",{className:"input-group col-md-4",children:[Object(a.jsx)("input",{className:"form-control py-2 border-right-0 border",type:"search",value:this.state.q,placeholder:"search",onChange:this.handleChange}),Object(a.jsx)("span",{className:"input-group-append",children:Object(a.jsx)("button",{className:"btn btn-outline-secondary border-left-0 border",type:"button",onClick:function(){return t.search()},children:Object(a.jsx)("i",{className:"fa fa-search"})})})]})}),this.state.videos.map((function(e){var n=e.id;return O.a.isObject(n)&&(n=n.videoId),Object(a.jsx)("div",{className:"row justify-content-center mt-3",children:Object(a.jsx)("div",{className:"input-group justify-content-center col-md-4",children:Object(a.jsxs)("div",{className:"card border-primary justify-content-center mb-1",children:[Object(a.jsx)(x.a,{url:"https://www.youtube.com/watch?v=".concat(n),width:"320px",height:"180px"}),Object(a.jsx)("div",{className:"btn-toolbar justify-content-center",role:"toolbar",children:Object(a.jsx)("div",{className:"btn-group",role:"group",onClick:function(e){e.preventDefault(),t.props.history.push("/watch/".concat(n))},children:Object(a.jsx)("button",{className:"btn btn-default",children:Object(a.jsx)("i",{className:"fa fa-play-circle fa-2x"})})})})]})})})}))]})}}]),n}(c.Component),k=n(14),N=n.n(k),w=n(38),S=n(20),P=n(76),F=n.n(P),q=n(80),I=n(77),T=n(78),$=n.n(T),D=function(t){Object(p.a)(n,t);var e=Object(j.a)(n);function n(t){var a;return Object(l.a)(this,n),(a=e.call(this,t)).changePlaying=function(){a.setState({playing:!a.state.playing})},a.playButtonClass=function(){var t=a.state.playing?"fa-pause":"fa-play-circle";return"fa ".concat(t," fa-2x")},a.onProgress=function(){a.setState({currentSecond:a.player.getCurrentTime()})},a.ref=function(t){a.player=t},a.getCaption=function(){if(O.a.isEmpty(a.state.captions))return"hien chua co sub";var t=a.state.currentSecond,e=O.a.find(a.state.captions,(function(e){return(e.start<t||e.start-.5<t)&&t<e.end-.5}));return O.a.get(e,"translatedCaption")},a.seekTo=function(t){a.player.seekTo(a.state.currentSecond+t)},a.state={playing:!1,captions:[],vidId:t.match.params.id,currentSecond:1,kuroshiro:null},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.fetchVidCaption()}},{key:"fetchVidCaption",value:function(){var t=this;(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ja";return f.a.get(v+"lang=".concat(e,"&v=").concat(t))})(this.state.vidId).then((function(e){var n=F.a.parse(e.data,{ignoreAttributes:!1}).transcript;if(!O.a.isEmpty(n)){n=n.text.map((function(t){return{text:t["#text"],start:parseFloat(t["@_start"]),end:parseFloat(t["@_start"])+parseFloat(t["@_dur"]),translatedCaption:""}})),t.setState({captions:n});var a=n.map((function(t){return t.text})).join("$$$");t.translateCaption(a,{mode:"furigana"})}}))}},{key:"translateCaption",value:function(){var t=Object(S.a)(N.a.mark((function t(e){var n,a,c,s=arguments;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s.length>1&&void 0!==s[1]?s[1]:{},this.state.kuroshiro){t.next=6;break}return n=new q.a,t.next=5,n.init(new I.a({dictPath:"/dict/"}));case 5:this.setState({kuroshiro:n});case 6:return t.next=8,this.state.kuroshiro.convert(e,{mode:"furigana",to:"hiragana"});case 8:a=(a=t.sent).split("$$$"),c=O.a.map(this.state.captions,(function(t,e){return Object(w.a)(Object(w.a)({},t),{},{translatedCaption:a[e]})})),this.setState({captions:c});case 12:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this;return Object(a.jsx)("div",{className:"container py-2 justify-content-center",children:Object(a.jsxs)("div",{className:"input-group justify-content-center col-md-6",children:[Object(a.jsx)(x.a,{ref:this.ref,url:"https://www.youtube.com/watch?v=".concat(this.state.vidId),playing:this.state.playing,config:{youtube:{playerVars:{showinfo:1}}},controls:!0,onProgress:this.onProgress}),Object(a.jsx)("div",{className:"btn-toolbar col-md-12 justify-content-center",role:"toolbar",children:Object(a.jsxs)("div",{className:"btn-group justify-content-around col-md-8",role:"group",children:[Object(a.jsx)("button",{className:"btn btn-default",onClick:this.changePlaying,children:Object(a.jsx)("i",{className:"fa fa-backward fa-2x"})}),Object(a.jsx)("button",{className:"btn btn-default",onClick:this.changePlaying,children:Object(a.jsx)("i",{className:this.playButtonClass()})}),Object(a.jsx)("button",{className:"btn btn-default",onClick:function(){return t.seekTo(10)},children:Object(a.jsx)("i",{className:"fa fa-forward fa-2x"})})]})}),Object(a.jsx)("div",{children:Object(a.jsx)("p",{className:"h4 mt-2",children:$()(this.getCaption())})})]})})}}]),n}(c.Component);function E(){return Object(a.jsx)(o.a,{children:Object(a.jsxs)("div",{children:[Object(a.jsx)("ul",{children:Object(a.jsx)("li",{children:Object(a.jsx)(o.b,{to:"/",children:"Home"})})}),Object(a.jsx)("hr",{}),Object(a.jsxs)(u.c,{children:[Object(a.jsx)(u.a,{exact:!0,path:"/",component:C}),Object(a.jsx)(u.a,{path:"/watch/:id",component:D})]})]})})}var _=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,194)).then((function(e){var n=e.getCLS,a=e.getFID,c=e.getFCP,s=e.getLCP,r=e.getTTFB;n(t),a(t),c(t),s(t),r(t)}))};n(191),n(192);i.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(E,{})}),document.getElementById("root")),_()},86:function(t,e,n){}},[[193,1,2]]]);
//# sourceMappingURL=main.2ffb966c.chunk.js.map